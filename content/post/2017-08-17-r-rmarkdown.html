---
title: "R Blogdown Setup in GitHub"
author: "aurora-mareviv"
date: 2017-08-17T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "blogdown", "#rstats"]
thumbnailImagePosition: left
thumbnailImage: ./images/hexbins.png
coverImage: ./logo1.png
metaAlignment: center
disable_comments: false
output:
  blogdown::html_page:
    toc: false
    fig_width: 8
    css: "/css/my-style.css"
--- 

  <link rel="stylesheet" href="/css/my-style.css" type="text/css" />


<div id="the-blogdown-r-package" class="section level1">
<h1>The <span class="texttt">blogdown</span> R package   <span class="fa fa-newspaper-o"></span></h1>
<p>Finally, -after 24h of failed attempts-, I could get my favourite <a href="https://gohugo.io/" target="_blank">Hugo</a> <a href="https://github.com/kakawait/hugo-tranquilpeak-theme" target="_blank">theme</a> up and running with R Studio and <a href="https://bookdown.org/yihui/blogdown/" target="_blank">Blogdown</a>.</p>
<!--MORE-->
<p>After exploring some alternatives, like <a href="https://shiring.github.io/blogging/2016/12/04/diy_your_own_blog" target="_blank">Shirin’s</a> (with Jekyll), and <a href="https://proquestionasker.github.io/blog/Making_Site/" target="_blank">Amber Thomas</a> advice (which involved Git skills beyond my basic abilities), I was able to install Yihui’s <a href="https://github.com/yihui/hugo-lithium-theme" target="_blank">hugo-lithium-theme</a> in a new repository.</p>
<p>However, I wanted to explore other blog templates, hosted in GiHub, like:</p>
<ul>
<li><a href="https://sourcethemes.com/academic/" target="_blank">gcushen/hugo-academic</a></li>
<li><a href="https://jpescador.com/" target="_blank">jpescador/hugo-future-imperfect</a> and</li>
<li><a href="https://tranquilpeak.kakawait.com/" target="_blank">kakawait/hugo-tranquilpeak-theme</a></li>
<li>Or this one <a href="https://themes.gohugo.io/theme/hugo-creative-portfolio-theme/" target="_blank">kishaningithub/hugo-creative-portfolio-theme</a></li>
</ul>
<p>The three first themes are currently linked in the <a href="https://bookdown.org/yihui/blogdown/other-themes.html" target="_blank">blogdown</a> documentation as being most simple and easy to set up for unexperienced blog programmers, but I hope the list will grow in the following months. For those who are willing to experiment, the complete list is <a href="https://themes.gohugo.io/" target="_blank">here</a>.</p>
<p>Finally I chose the hugo-tranquilpeak theme, by <a href="https://github.com/LouisBarranqueiro" target="_blank">Louis Barranqueiro</a> &amp; <a href="https://github.com/kakawait" target="_blank">Thibaud Leprêtre</a>, for which I mostly followed Tyler Clavelle’s <a href="https://tclavelle.github.io/blog/blogdown_github/" target="_blank">entry</a> on the topic. This approach turned out to be easy and good, given some conditions:</p>
<ul>
<li>Contrary to Yihui Xie’s <a href="https://bookdown.org/yihui/blogdown/deployment.html" target="_blank">advice</a>, I chose github.io to host my blog, instead of Netlify (I love my desktop integration with GitHub, so it was interesting for me not to move to another service for my static content).</li>
<li>In my machine, I installed Blogdown &amp; Hugo using R studio (v 1.1.336).</li>
<li>In GiHub, it was easier for me to host the blog directly in my main github pages repository (always named <span class="texttt">[USERNAME].github.io</span>), in the <span class="texttt">master</span> branch, following Tyler’s tutorial.</li>
<li>I have basic knowledge of html, css and javascript, so I didn’t mind to tinker around with the theme.</li>
<li>My custom styles didn’t involve theme <a href="https://github.com/kakawait/hugo-tranquilpeak-theme/blob/master/docs/user.md#quick--easy-modifications" target="_blank">rebuilding</a>. At this moment they’re simple cosmetic tricks.</li>
</ul>
<p>The steps I followed were:</p>
<div id="git-github-repos" class="section level4">
<h4>Git &amp; GitHub repos</h4>
<ul>
<li><span class="fa fa-github"></span> Setting a <a href="https://github.com/" target="_blank">GitHub</a> repo with the name <span class="texttt">[USERNAME].github.io</span> (in my case <span class="texttt">aurora-mareviv.github.io</span>). See <a href="https://help.github.com/articles/create-a-repo/" target="_blank">this</a> and <a href="https://tclavelle.github.io/blog/blogdown_github/" target="_blank">this</a>.<br />
</li>
<li>Create a <code>git</code> repo in your machine:
<ul>
<li>Create manually a new directory called <span class="texttt">[USERNAME].github.io</span>.</li>
<li>Run in the terminal (Windows users have to install <a href="https://git-scm.com/downloads" target="_blank"><code>git</code></a> first):</li>
</ul>
<pre class="bash"><code>cd /Git/[USERNAME].github.io # your path may be different
git init # initiates repo in the directory
git remote add origin https://github.com/[USERNAME]/[USERNAME].github.io # connects git local repo to remote Github repo
git pull origin master # in case you have LICENSE and Readme.md files in the GitHub repo, they&#39;re downloaded</code></pre></li>
<li>You can add a <em>.gitignore</em> text file to the root directory of your repo. This tells <code>git</code> what files <em>not to add</em> to the repo, even if they are into the folder. One example of <em>.gitignore</em> file is <a href="https://github.com/aurora-mareviv/talesofr/blob/master/.gitignore" target="_blank">this</a>.</li>
<li>For now, your repo is ready. We will now focus in creating &amp; customising our Blogdown.</li>
</ul>
</div>
<div id="rstudio-and-blogdown" class="section level4">
<h4>RStudio and <span class="texttt">blogdown</span></h4>
<ul>
<li><p>We will open RStudio (v 1.1.336, <a href="https://www.rstudio.com/products/rstudio/download/preview/" target="_blank">development</a> version as of today).</p>
<ul>
<li>First, you may need to install Blogdown in R:</li>
</ul>
<pre class="r"><code>install.packages(&quot;blogdown&quot;)</code></pre>
<ul>
<li>In RStudio, select the <em>Menu &gt; File &gt; New Project</em> following the lower half of these <a href="https://bookdown.org/yihui/blogdown/rstudio-ide.html" target="_blank">instructions</a>. The wizard for setting up a Hugo Blogdown project may not be yet available in your RStudio version (not for much longer probably).</li>
</ul></li>
</ul>
<div class="figure">
<img src="/images/tuto/tuto1.png" alt="Creating new Project" />
<p class="caption">Creating new Project</p>
</div>
<div class="figure">
<img src="/images/tuto/tuto2.png" alt="Selecting Hugo Blogdown format" />
<p class="caption">Selecting Hugo Blogdown format</p>
</div>
<div class="figure">
<img src="/images/tuto/tuto3.png" alt="Selecting Hugo Blogdown theme" />
<p class="caption">Selecting Hugo Blogdown theme</p>
</div>
<div class="figure">
<img src="/images/tuto/tuto4a.png" alt="A config.toml file appears" />
<p class="caption">A <strong>config.toml</strong> file appears</p>
</div>
<hr>
</div>
</div>
<div id="customising-paths-and-styles" class="section level1">
<h1>Customising paths and styles</h1>
<p>Before we <span class="texttt">build</span> and <span class="texttt">serve</span> our site, we need to tweak a couple of things in advance, if we want to smoothly deploy our blog into GitHub pages.</p>
<div id="modify-config.toml-file" class="section level3">
<h3>Modify <span class="texttt">config.toml</span> file</h3>
<p>To integrate with GiHub pages, there are the essential modifications at the top of our <em>config.toml</em> file:</p>
<ul>
<li>We need to set up the base URL to the “root” of the web page (<a href="https://%5BUSERNAME%5D.github.io/" class="uri">https://[USERNAME].github.io/</a> in this case). We use the dot instead of “/” to allow tag URLs to link properly.<br />
</li>
<li>By default, the web page is published in the “public” folder. We need it to be published in the root of the repository, to match the structure of the GitHub <span class="texttt">master</span> branch:</li>
</ul>
<pre class="r"><code>baseurl = &quot;/./&quot;
publishDir = &quot;./&quot;</code></pre>
<ul>
<li>Other useful global settings:</li>
</ul>
<pre class="r"><code>draft: false # if set to true, changes will not be published
ignoreFiles = [&quot;\\.Rmd$&quot;, &quot;\\.Rmarkdown$&quot;, &quot;_files$&quot;, &quot;_cache$&quot;]
enableEmoji = true</code></pre>
<div id="images-styling-paths" class="section level4">
<h4>Images &amp; styling paths</h4>
<p>We can revisit the <em>config.toml</em> file to make changes to the default settings.</p>
<p>The logo that appears in the corner must be in the root folder. To modify it in the <em>config.toml</em>:</p>
<pre class="r"><code>picture = &quot;logo.png&quot; # the path to the logo</code></pre>
<p>The cover (background) image must be located in <span class="texttt"> /themes/hugo-tranquilpeak-theme/static/images</span>. To modify it in the <em>config.toml</em>:</p>
<pre class="r"><code>coverImage = &quot;myimage.jpg&quot;</code></pre>
<p>We want some custom css and js. We need to locate it in <span class="texttt"> /static/css </span> and in <span class="texttt"> /static/js</span> respectively.</p>
<pre class="r"><code># Custom CSS. Put here your custom CSS files. They are loaded after the theme CSS;
# they have to be referred from static root. Example
customCSS = [&quot;css/my-style.css&quot;]

# Custom JS. Put here your custom JS files. They are loaded after the theme JS;
# they have to be referred from static root. Example
customJS = [&quot;js/myjs.js&quot;]</code></pre>
</div>
</div>
<div id="custom-css" class="section level3">
<h3>Custom css</h3>
<p>We can add arbitrary classes to our <em>css</em> file (see above).</p>
<p>Since I started writing in Bootstrap, I miss it a lot. Since this theme already has bootstrap classes, I brought some others I didn’t find in the theme (they’re <a href="https://github.com/kakawait/hugo-tranquilpeak-theme/blob/master/docs/user.md" target="_blank">available</a> for <em>.md</em> files, but currently not for <em>.Rmd</em>)</p>
<div class="well alert alert-danger text-center">
<p><span class="fa fa-minus-circle"></span> alert-danger</p>
</div>
<div class="well alert alert-warning text-center">
<p><span class="fa fa-warning"></span> alert-warning</p>
</div>
<div class="well alert alert-success text-center">
<p><span class="fa fa-check-circle"></span> alert-success</p>
</div>
<div class="well alert alert-info text-center">
<p><span class="fa fa-info-circle"></span> alert-info</p>
</div>
<p>Here is my custom <em>css</em> file to date:</p>
<pre class="bash"><code>/* @import url(&#39;https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css&#39;); may conflict with default theme*/
@import url(&#39;https://fonts.googleapis.com/icon?family=Material+Icons&#39;); /*google icons*/
@import url(&#39;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#39;); /*font awesome icons*/

.input-lg {
  font-size: 30px;
}
.input {
  font-size: 20px;
}
.font-sm {
    font-size: 0.7em;
}
.texttt {
  font-family: monospace;
}
.alert {
padding: 15px;
margin-bottom: 20px;
border: 1px solid transparent;
border-radius: 4px;
}
.alert-success {
color: #3c763d;
background-color: #dff0d8;
border-color: #d6e9c6;
}
.alert-danger,
.alert-error {
  color: #b94a48;
  background-color: #f2dede;
  border-color: #eed3d7;
}
.alert-info {
  color: #3a87ad;
  background-color: #d9edf7;
  border-color: #bce8f1;
}
.alert-gray {
  background-color: #f2f3f2;
  border-color: #f2f3f2;
}

/*style for printing*/
@media print {
    .noPrint {
       display:none;
   }
    }

/*link formatting*/
a:link {
    color: #478ca7;
    text-decoration: none;
} 
a:visited {
    color: #478ca7;
    text-decoration: none;
}
a:hover {
    color: #82b5c9;
    text-decoration: none;
}</code></pre>
<p>An example of the <span class="texttt" style="color:#b94a48"> alert-danger</span> class:</p>
<pre class="c"><code>&lt;div class=&quot;well alert alert-danger text-center&quot;&gt;
  &lt;span class=&quot;fa fa-minus-circle&quot;&gt;&lt;/span&gt; alert-danger
&lt;/div&gt;</code></pre>
<p>Also, we have <a href="http://fontawesome.io/icons/" target="_blank">font-awesome</a> icons! <span class="fa fa-gift"></span></p>
<div id="update-hugo-shortcodes-in-.rmd" class="section level4">
<h4>Update! Hugo shortcodes in <em>.Rmd</em> !</h4>
<p>Searching through blogdown/issues in GitHub, I found this good trick by Yihui:<br />
You can add Hugo shortcodes if you wrap them with the function <code>htmltools:HTML</code></p>
<pre class="r"><code>htmltools::HTML(&quot;{{&lt; hl-text danger &gt;}}
              this is a highlighted danger text
              {{&lt; /hl-text &gt;}}&quot;)</code></pre>
{{< hl-text danger >}}
              this is a highlighted danger text
              {{< /hl-text >}}
</div>
</div>
<div id="custom-javascript" class="section level3">
<h3>Custom javascript</h3>
<p>We can also add really cool functions to enhance our post. <strong>Click in the red button below!</strong>:</p>
<div id="myButton" class="button well alert alert-danger text-center" onclick="alertInfoIcon(&#39;myButton&#39;)">
<p><span id="toInfo"><span class="fa fa-minus-circle"></span> alert-danger</span></p>
</div>
<p>Here is the code of the button:</p>
<pre class="c"><code>&lt;div class=&quot;button well alert alert-danger text-center&quot; id=&quot;myButton&quot; onclick=&quot;alertColor()&quot;&gt;
  &lt;span id=&quot;toInfo&quot;&gt; &lt;span class=&quot;fa fa-minus-circle&quot;&gt;&lt;/span&gt;alert-danger &lt;/span&gt;
&lt;/div&gt;</code></pre>
<p>And <a href="https://github.com/aurora-mareviv/talesofr/blob/master/static/js/myjs.js" target="_blank">here</a> is the javascript function to add to <span class="texttt"> /static/js/</span>:</p>
<pre class="c"><code>function alertColor() {
  var result = &quot;&lt;span class=&#39;fa fa-info-circle&#39;&gt;&lt;/span&gt;&amp;nbsp;alert-info&quot;;
  document.getElementById(&quot;toInfo&quot;).innerHTML = result; 
  document.getElementById(&quot;myButton&quot;).style.backgroundColor = &quot;#d9edf7&quot;;
  document.getElementById(&quot;myButton&quot;).style.color = &quot;#3a87ad&quot;;
  document.getElementById(&quot;myButton&quot;).style.borderColor = &quot;#bce8f1&quot;;
}</code></pre>
</div>
<div id="mathjax" class="section level3">
<h3>MathJax</h3>
<p>To correctly display LaTeX formulas, we must follow Yihui Xie’s <a href="https://bookdown.org/yihui/blogdown/templates.html" target="_blank">advice</a>.<br />
We will simply add the following code at the bottom of our <span class="texttt"> /themes/hugo-tranquilpeak-theme/layouts/partials/script.html </span>file:</p>
<pre class="bash"><code>&lt;script src=&quot;//yihui.name/js/math-code.js&quot;&gt;&lt;/script&gt;
&lt;script async
src=&quot;//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;
&lt;/script&gt;</code></pre>
<p><span class="math display">\[\lim_{x \to \infty} \exp(-x) = 0\]</span></p>
</div>
</div>
<div id="site-build-with-blogdown" class="section level1">
<h1>Site build with <span class="texttt"> blogdown </span></h1>
<p>Once we have ready our theme, we can add some content, modifying or deleting the various examples we will find in <span class="texttt"> /content/post</span>.</p>
<p>We need to make use of Blogdown &amp; Hugo to compile our <em>.Rmd</em> file and create our <em>html</em> post:</p>
<pre class="r"><code>blogdown::build_site()
blogdown::serve_site()</code></pre>
<p>In the viewer, at the right side of the IDE you can examine the resulting <em>html</em> and see if something didn’t go OK.</p>
</div>
<div id="deploying-the-site" class="section level1">
<h1>Deploying the site</h1>
<div id="updating-the-local-git-repository" class="section level4">
<h4>Updating the local <span class="texttt"> git </span> repository</h4>
<p>This can be done with simple git commands:</p>
<pre class="bash"><code>cd /Git/[USERNAME].github.io # your path to the repo may be different
git add . # indexes all files that wil be added to the local repo
git commit -m &quot;Starting my Hugo blog&quot; # adds all files to the local repo, with a commit message</code></pre>
</div>
<div id="pushing-to-github" class="section level4">
<h4>Pushing to GitHub</h4>
<pre class="bash"><code>git push origin master # we push the changes from the local git repo to the remote repo (GitHub repo)</code></pre>
<p>Just go to the page <span class="texttt"><a href="https://%5BUSERNAME%5D.github.io" class="uri">https://[USERNAME].github.io</a></span> and enjoy your blog!</p>
<hr>
</div>
</div>
<div id="r-code" class="section level1">
<h1>R code</h1>
<p>Works just the same as in Rmarkdown. R code is compiled into an <em>html</em> and published as static web content in few steps. Welcome to the era of reproducible blogging!</p>
<p>The figure <a href="#fig:diamond">1</a> uses the <code>ggplot2</code> library:</p>
<pre class="r"><code>library(ggplot2)
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_point()</code></pre>
<div class="figure"><span id="fig:diamond"></span>
<img src="/post/2017-08-17-r-rmarkdown_files/figure-html/diamond-1.png" alt="diamonds plot with ggplot2." width="768" />
<p class="caption">
Figure 1: diamonds plot with ggplot2.
</p>
</div>
<hr>
</div>
<div id="a-new-post-in-blogdown" class="section level1">
<h1>A new post in <span class="texttt">blogdown</span></h1>
<p>I know there is a procedure to create a new post using the interface in RStudio but this one will also work:</p>
<p>I copied a blank <em>.Rmd</em> file into the folder <span class="texttt"> /content/post </span>. I gave it a different name than the other post, with the date and some explanatory text (I called it “<em>2017-08-22-new-post.Rmd</em>”).</p>
<p>Then, I added an appropriate YAML heading (similar to the one in the previous post, but changing dates and times).</p>
<pre class="r"><code>---
title: &quot;New Post in Blogdown&quot;
author: &quot;1&quot;
date: 2017-08-22T23:41:14-05:00
draft: false
categories: [&quot;R&quot;]
tags: [&quot;R Markdown&quot;, &quot;blogdown&quot;, &quot;#rstats&quot;]
thumbnailImagePosition: left
thumbnailImage: ./images/logo.png
metaAlignment: center
disable_comments: true
output:
  blogdown::html_page:
    toc: false
    fig_width: 8
    css: &quot;/css/my-style.css&quot;
--- </code></pre>
<p>Finally I added some content to the Rmarkdown and saved the changes.</p>
<p>We need to make use of Blogdown &amp; Hugo to compile our <em>.Rmd</em> file and create our <em>html</em> post:</p>
<pre class="r"><code>blogdown::build_site()
blogdown::serve_site()</code></pre>
<p>In the viewer, at the right side of the IDE you can examine the resulting <em>html</em> and see if something didn’t go OK.</p>
<div id="deploying-the-site-with-the-new-post" class="section level3">
<h3>Deploying the site with the new post</h3>
<div id="updating-the-local-git-repository-1" class="section level4">
<h4>Updating the local <span class="texttt"> git </span> repository</h4>
<p>This can be done with simple git commands:</p>
<pre class="bash"><code>cd /Git/[USERNAME].github.io # your path to the repo may be different
git add . # indexes all files that wil be added to the local repo
git commit -m &quot;Adding a new post&quot; # adds all files to the local repo, with a commit message</code></pre>
</div>
<div id="pushing-to-github-1" class="section level4">
<h4>Pushing to GitHub</h4>
<pre class="bash"><code>git push origin master # we push the changes from the local git repo to the remote repo (GitHub repo)</code></pre>
<p>You can rinse and repeat this procedure for the rest of the posts.</p>
<hr>
</div>
</div>
</div>
<div id="rmd-source-code" class="section level1">
<h1>Rmd source code</h1>
<p>You can download it from <a href="https://github.com/aurora-mareviv/talesofr/blob/master/content/post/2017-08-17-r-rmarkdown.Rmd" target="_blank">here</a>.</p>
</div>
<div id="next-steps" class="section level1">
<h1>Next steps</h1>
<ul>
<li>I will try to <a href="http://justindunham.net/migrating-from-wordpress-to-hugo/" target="_blank">migrate</a> my <a href="https://talesofr.wordpress.com/" target="_blank">Wordpress blog</a> into this one. Will it ever be possible?</li>
</ul>
<div class="figure">
<img src="/images/hexbins.png" />

</div>
</div>
<div id="updated-tutorial" class="section level1">
<h1>Updated tutorial</h1>
<p>I updated (&amp; hopefully improved) this tutorial, which you can check <a href="https://aurora-mareviv.github.io/talesofr/2018/02/r-blogdown-setup-in-github-2/">here</a>.</p>
</div>
